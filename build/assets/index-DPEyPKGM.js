import{c as tt,j as e,h as Ge,k as xt,T as ee,l as fe,R as ft,r as R,m as at,n as Me,I as Ce,p as Ke,B as K,E as pt,P as st,q as nt,d as pe,i as mt,A as X,t as re,v as vt,w as bt,x as Et,b as rt,y as yt,z as lt,C as Nt,D as Z,S as V,G as Le,H as St,F as Ae,J as jt,K as Ct,N as He,O as wt}from"./index-bcifMYEQ.js";import{u as it,C as ot,P as Tt,S as ct,T as At,a as It,b as Rt,c as Ot,D as kt,d as Lt,e as Ft,f as Ie}from"./popover-BSl-E8wt.js";import{u as Dt}from"./use-search-params-Bty0Q4Dj.js";import{T as Pt}from"./text-BZj7_MT7.js";import{F as Mt,s as Ut}from"./file-warning-CuLDAtVk.js";import{R as Re}from"./index-DMQ_vExv.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=tt("FileCode2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m5 12-3 3 3 3",key:"oke12k"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=tt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);function dt({card:o}){const n=Dt(),{setNodeRef:t,attributes:c,listeners:x,transform:O,transition:E,isDragging:g}=it({id:o.id,data:{type:"Task",card:o}}),A={transition:E,transform:ot.Transform.toString(O)};return g?e.jsx("div",{ref:t,style:A,className:"relative flex h-[100px] min-h-[170px] cursor-grab items-start rounded-xl bg-black/50 p-2.5 text-left opacity-30 hover:ring-2 hover:ring-inset hover:ring-primary-default"}):e.jsx(e.Fragment,{children:e.jsxs("div",{ref:t,style:A,...c,...x,onClick:()=>n.set({[Ge.DIALOG]:xt.CARD,[Ge.ID]:o.id}),className:"flex cursor-pointer flex-col rounded-lg border border-solid border-slate-300 shadow-lg transition-all hover:border-[2px] hover:border-primary-default",children:[e.jsx("div",{className:"h-[115px] w-full rounded-t-[6px]",style:{backgroundColor:"#1677ff"}}),e.jsx("div",{className:"flex items-center justify-between p-2 bg-white rounded-b-xl",children:e.jsx("div",{className:"flex flex-col gap-y-1",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsx(ee.Text,{className:"w-[140px] truncate text-xs font-semibold",children:o.name}),e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(fe,{title:"The card already has a description",color:"black",placement:"bottom",children:e.jsx("div",{className:"flex items-center rounded-sm  p-1 transition-all hover:bg-[#091E4224]",children:e.jsx(Pt,{className:"w-3 h-3 text-slate-500"})})}),e.jsx(fe,{color:"black",title:"Followed",placement:"bottom",children:e.jsx("div",{className:"flex items-center rounded-sm p-1 transition-all hover:bg-[#091E4224]",children:e.jsx(ft,{className:"w-3 h-3 text-slate-500"})})}),e.jsx(fe,{color:"black",title:"Attactments",className:"text-[10px]",placement:"bottom",children:e.jsxs("div",{className:"flex items-center rounded-sm p-[2px] transition-all hover:bg-[#091E4224]",children:[e.jsx(Tt,{className:"w-3 h-3 text-slate-500"}),e.jsx(ee.Text,{className:"ml-[1px] text-xs",children:"3"})]})})]})]})})})]})})}const ze=({column:o,cards:n,updateColumn:t,deleteColumn:c,createCard:x})=>{const O=R.useMemo(()=>n.map(r=>r.id),[n]),E={id:"",name:"",description:"",listCardId:"",checkLists:[]},[g,A]=R.useState(E),[U,F]=at(!1),P=r=>{A({...g,name:r})},{setNodeRef:_,attributes:C,listeners:M,transform:N,transition:v,isDragging:w}=it({id:o.id,data:{type:"Column",column:o}}),s={transition:v,transform:ot.Transform.toString(N)};if(w)return e.jsx("div",{ref:_,style:s,className:"flex h-[520px] w-[275px] flex-col items-center rounded-xl border-none bg-[#ffffff3d]"});const a=Me(r=>r.theme.btnColor);return e.jsxs("div",{ref:_,style:s,className:"flex max-h-[480px] w-[275px] cursor-move flex-col gap-y-2 rounded-xl bg-white p-2 shadow-lg",children:[e.jsxs("div",{...C,...M,className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(Ce,{allowClear:!0,type:"text",defaultValue:o.name,className:"cursor-pointer rounded-xl border-none text-base font-bold transition-all",onPressEnter:r=>{t&&t({...o,name:r.currentTarget.value})},onBlur:r=>{t&&t({...o,name:r.target.value})}})}),e.jsx(Ke,{placement:"rightTop",trigger:"click",title:e.jsx("div",{className:"text-center font-semibold",children:"Behavior"}),content:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(K,{type:"default",className:"text-left text-xs",children:"Add Card"}),e.jsx(K,{type:"default",className:"text-left text-xs ",children:"Add List"}),e.jsx(K,{type:"default",className:"text-left text-xs ",children:"Copy List"}),e.jsx(K,{type:"default",className:"text-left text-xs ",children:"Move List"}),e.jsx(K,{type:"default",className:"text-left text-xs ",children:"Archive List"})]}),children:e.jsx("div",{className:"rounded px-1 transition-all hover:bg-[#091E4224]",children:e.jsx(pt,{className:"mt-1 h-5 w-5 text-slate-500"})})})]}),e.jsx("div",{className:"flex max-h-[420px] flex-col gap-y-2 overflow-y-scroll",children:e.jsx(ct,{items:O,children:n.map(r=>e.jsx(dt,{card:r},r.id))})}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(Ke,{trigger:"click",onOpenChange:F,open:U,content:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(ee.Text,{className:"text-xs",children:"Create new card"}),e.jsx(Ce,{onChange:r=>P(r.target.value),value:g.name,placeholder:"Enter card title",onPressEnter:x&&(()=>{x(o.id,g),F(!1),P("")})}),e.jsx(K,{type:"primary",size:"small",className:"w-full text-white",onClick:x&&(()=>{x(o.id,g),F(!1),P("")}),style:{backgroundColor:a,color:"#fff"},children:"Add Card"})]}),children:e.jsx(K,{type:"dashed",icon:e.jsx(st,{className:"h-4 w-4"}),className:"flex w-full items-center rounded-xl",children:"Add Card"})}),e.jsx(fe,{title:"Remove card",children:e.jsx("div",{className:"cursor-pointer rounded px-1 transition-all hover:bg-[#091E4224]",children:e.jsx(At,{onClick:c&&(()=>{c(o.id)}),className:"mt-1 h-4 w-4 text-slate-500"})})})]})]})},$t=async(o,n)=>await re.post(`/projects/${o}/apply-generate`,n),Gt=()=>{const o=nt(),n=vt(o);return pe({mutationFn:({taskGenerate:t})=>$t(o,t),onSuccess(t){mt(t.status)&&(X.success("Apply generate successfully"),n(),window.location.replace(`tsm/project/${o}?view=project`))},onError:t=>{X.error(t.message)}})},Kt="/assets/blink-TgwCex39.png";function h({width:o,height:n,borderRadius:t,className:c}){return e.jsx("div",{className:`skeleton ${c} bg-gray-400`,style:{width:o,height:n,borderRadius:t}})}const Ht=()=>e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsxs("div",{className:"flex h-[515px] w-[280px] flex-col gap-y-2 overflow-hidden  rounded-lg bg-white/50 p-2",children:[e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx(h,{width:"90%",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]})]}),e.jsxs("div",{className:"flex h-[515px] w-[280px] flex-col gap-y-2 overflow-hidden  rounded-lg bg-white/50 p-2",children:[e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx(h,{width:"90%",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]})]}),e.jsxs("div",{className:"flex h-[515px] w-[280px] flex-col gap-y-2 overflow-hidden  rounded-lg bg-white/50 p-2",children:[e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx(h,{width:"90%",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]})]}),e.jsxs("div",{className:"flex h-[515px] w-[280px] flex-col gap-y-2 overflow-hidden  rounded-lg bg-white/50 p-2",children:[e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsx(h,{width:"90%",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(h,{height:"115px",className:"rounded-lg bg-slate-500"}),e.jsx(h,{width:"50%",height:"10px",className:"rounded bg-slate-500"}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"}),e.jsx(h,{width:"20px",height:"20px",className:"rounded-xl bg-slate-500"})]})]})]})]}),zt=()=>e.jsx("div",{className:"",children:e.jsx(Ht,{})}),Yt=({showModal:o,content:n,setShowModal:t=()=>{},project:c})=>e.jsx(bt,{title:e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(Mt,{size:24,className:"text-yellow-500"}),e.jsx(ee.Text,{strong:!0,children:"No File Uploaded"})]}),open:o,cancelText:"Cancel",onCancel:()=>t(!1),onOk:()=>{t(!1),window.open(`/tsm/project/${c==null?void 0:c.id}?view=setting`,"_blank")},okText:"Upload File",children:e.jsx(ee.Text,{children:n})}),qt=()=>{const[o,n]=R.useState({listCards:[]}),{data:t}=Et(),[c,x]=R.useState(!1),{mutate:O,isPending:E}=Gt(),[g,A]=R.useState(!1),U=Me(M=>M.theme.btnColor),{modal:F}=rt.useApp(),P=()=>{t!=null&&t.speDocPath||A(!0),(async()=>{try{const N=await re.get(`/projects/${t==null?void 0:t.id}/generate-task`);N.status>=200&&N.status<300&&(x(!0),n(N.data),x(!1))}catch(N){x(!1),typeof N=="object"&&N!==null&&"response"in N&&X.error(N.response.data.message||"An error occurred")}})()},_=()=>{O({taskGenerate:o},{onSuccess:()=>{n({listCards:[]})}})},C=async()=>{const M=F.confirm({title:"Confirm",content:"Are you sure you want to remove the generated tasks?",cancelText:"Cancel",okText:"Remove",okType:"danger"});M.update({okButtonProps:{onClick:()=>{n({listCards:[]}),M.destroy()}},cancelButtonProps:{disabled:E}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex min-h-screen flex-col px-6",children:[o.listCards.length>0?e.jsx("div",{children:e.jsx("div",{className:"flex items-start justify-start gap-x-3",children:e.jsx(Wt,{taskGenerate:o,setTaskGenerate:n})})}):e.jsxs("div",{className:"flex items-start gap-x-10",children:[!c&&e.jsxs("button",{onClick:P,className:"btn-generate-ai relative cursor-pointer border-none",children:["Generate Task",e.jsx("span",{className:"absolute left-4 top-3",children:e.jsx("img",{src:Kt,className:"h-5 w-5"})})]}),c&&e.jsx(zt,{})]}),o.listCards.length>0&&e.jsx("div",{className:"float-right mt-2 flex w-full items-center justify-end",children:e.jsxs(yt,{children:[e.jsx(K,{type:"default",className:"flex items-center rounded text-white",icon:e.jsx(lt,{className:"h-4 w-4"}),style:{backgroundColor:U},loading:E,onClick:_,children:"Save"}),e.jsx(K,{danger:!0,onClick:C,children:"Cancel"})]})})]}),e.jsx(Yt,{content:`\r
        You have not uploaded any specification document yet. Please upload the document to generate tasks.`,project:t,setShowModal:A,showModal:g})]})},Wt=({taskGenerate:o,setTaskGenerate:n})=>{const t=It(Rt(Ot,{activationConstraint:{distance:10}})),[c,x]=R.useState(null),[O,E]=R.useState(null),[g,A]=at(!1),U=i=>{A(i)},[F,P]=R.useState(o.listCards),_=R.useMemo(()=>F.map(i=>i==null?void 0:i.id),[F]),[C,M]=R.useState(()=>{const i=[];return o.listCards.forEach(m=>{m.cards.forEach(b=>{i.push({...b,listCardId:m.id})})}),i}),[N,v]=R.useState({id:"",name:"",cards:[]}),w=i=>{const m=F.map(b=>({...b,cards:i.filter(D=>D.listCardId===b.id)}));n({listCards:m})},s=()=>{P(i=>[...i,N]),n(i=>({listCards:[...i.listCards,N]}))},a=async(i,m)=>{m.listCardId=i,M(b=>[...b,m]),w([...C,m])},r=i=>{P(i),w(C)},l=i=>{M(i),w(i)};return e.jsxs(kt,{sensors:t,onDragStart:u,onDragEnd:p,onDragOver:y,children:[e.jsx("div",{className:"inline-block px-6",children:e.jsxs("div",{className:"flex items-start gap-x-3",children:[e.jsx(ct,{items:_,children:F.map((i,m)=>e.jsx(ze,{createCard:a,column:i,cards:(C==null?void 0:C.filter(b=>b.listCardId===i.id))||[],deleteColumn:b=>{P(D=>D.filter(H=>H.id!==b))}},m))}),e.jsx(Lt,{visible:g,onOpenChange:U,content:e.jsxs("div",{className:"flex w-[250px] flex-col gap-4",children:[e.jsx(Ce,{placeholder:"Enter list title",allowClear:!0,size:"large",className:"rounded text-sm font-semibold ",value:N.name,onChange:i=>{v(m=>({...m,name:i.target.value}))}}),e.jsxs("div",{className:"ml-auto flex items-center gap-x-2",children:[e.jsx(K,{onClick:s,type:"primary",className:"rounded text-xs font-semibold ",children:"Add list"}),e.jsx(K,{type:"default",className:"w-16 rounded text-xs font-semibold",children:"Cancel"})]})]}),children:e.jsx(K,{icon:e.jsx(st,{className:"h-4 w-4 opacity-65"}),size:"large",className:"flex w-[275px] items-center rounded-xl border-none bg-[#ffffff3d] text-sm font-semibold text-white",children:"Add new list"})})]})}),Nt.createPortal(e.jsxs(Ft,{children:[c&&e.jsx(ze,{column:c,cards:C.filter(i=>i.listCardId===c.id)}),O&&e.jsx(dt,{card:O})]}),document.body)]});function u(i){var m,b;if(((m=i.active.data.current)==null?void 0:m.type)==="Column"){x(i.active.data.current.column);return}if(((b=i.active.data.current)==null?void 0:b.type)==="Task"){E(i.active.data.current.task);return}}function p(i){var k;x(null),E(null);const{active:m,over:b}=i;if(!b)return;const D=m.id,H=b.id;if(D===H||!(((k=m.data.current)==null?void 0:k.type)==="Column"))return;const te=F.findIndex(f=>f.id===D),le=F.findIndex(f=>f.id===H),I=Ie(F,te,le);r(I)}function y(i){var I,k,f;const{active:m,over:b}=i;if(!b)return;const D=m.id,H=b.id;if(D===H)return;const J=((I=m.data.current)==null?void 0:I.type)==="Task",te=((k=b.data.current)==null?void 0:k.type)==="Task";if(!J)return;if(J&&te){const S=C.findIndex($=>$.id===D),q=C.findIndex($=>$.id===H);C[S].listCardId!=C[q].listCardId&&(C[S].listCardId=C[q].listCardId,l(Ie(C,S,q-1))),l(Ie(C,S,q))}const le=((f=b.data.current)==null?void 0:f.type)==="Column";if(J&&le){const S=C.findIndex(q=>q.id===D);C[S].listCardId=H.toString(),l(Ie(C,S,S))}}};var ut={},G=Z&&Z.__assign||function(){return G=Object.assign||function(o){for(var n,t=1,c=arguments.length;t<c;t++){n=arguments[t];for(var x in n)Object.prototype.hasOwnProperty.call(n,x)&&(o[x]=n[x])}return o},G.apply(this,arguments)},Qt=Z&&Z.__createBinding||(Object.create?function(o,n,t,c){c===void 0&&(c=t);var x=Object.getOwnPropertyDescriptor(n,t);(!x||("get"in x?!n.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return n[t]}}),Object.defineProperty(o,c,x)}:function(o,n,t,c){c===void 0&&(c=t),o[c]=n[t]}),Vt=Z&&Z.__setModuleDefault||(Object.create?function(o,n){Object.defineProperty(o,"default",{enumerable:!0,value:n})}:function(o,n){o.default=n}),Xt=Z&&Z.__importStar||function(o){if(o&&o.__esModule)return o;var n={};if(o!=null)for(var t in o)t!=="default"&&Object.prototype.hasOwnProperty.call(o,t)&&Qt(n,o,t);return Vt(n,o),n},Zt=Z&&Z.__rest||function(o,n){var t={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&n.indexOf(c)<0&&(t[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,c=Object.getOwnPropertySymbols(o);x<c.length;x++)n.indexOf(c[x])<0&&Object.prototype.propertyIsEnumerable.call(o,c[x])&&(t[c[x]]=o[c[x]]);return t};Object.defineProperty(ut,"__esModule",{value:!0});var Q=Xt(R),Jt=89,Oe=90,ea=77,Ye=57,qe=219,We=222,Qe=192,Ve=100,ta=3e3,aa=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),Pe=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),ke="npm__react-simple-code-editor__textarea",sa=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(ke,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(ke,` {
    color: transparent !important;
  }

  .`).concat(ke,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),na=Q.forwardRef(function(n,t){var c=n.autoFocus,x=n.disabled,O=n.form,E=n.highlight,g=n.ignoreTabKey,A=g===void 0?!1:g,U=n.insertSpaces,F=U===void 0?!0:U,P=n.maxLength,_=n.minLength,C=n.name,M=n.onBlur,N=n.onClick,v=n.onFocus,w=n.onKeyDown,s=n.onKeyUp,a=n.onValueChange,r=n.padding,l=r===void 0?0:r,u=n.placeholder,p=n.preClassName,y=n.readOnly,i=n.required,m=n.style,b=n.tabSize,D=b===void 0?2:b,H=n.textareaClassName,J=n.textareaId,te=n.value,le=Zt(n,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),I=Q.useRef({stack:[],offset:-1}),k=Q.useRef(null),f=Q.useState(!0),S=f[0],q=f[1],$={paddingTop:typeof l=="object"?l.top:l,paddingRight:typeof l=="object"?l.right:l,paddingBottom:typeof l=="object"?l.bottom:l,paddingLeft:typeof l=="object"?l.left:l},me=E(te),z=function(d,L){return d.substring(0,L).split(`
`)},ae=Q.useCallback(function(d,L){var j,T,B;L===void 0&&(L=!1);var Y=I.current,ie=Y.stack,be=Y.offset;if(ie.length&&be>-1){I.current.stack=ie.slice(0,be+1);var Ee=I.current.stack.length;if(Ee>Ve){var xe=Ee-Ve;I.current.stack=ie.slice(xe,Ee),I.current.offset=Math.max(I.current.offset-xe,0)}}var ne=Date.now();if(L){var de=I.current.stack[I.current.offset];if(de&&ne-de.timestamp<ta){var ye=/[^a-z0-9]([a-z0-9]+)$/i,W=(j=z(de.value,de.selectionStart).pop())===null||j===void 0?void 0:j.match(ye),Ne=(T=z(d.value,d.selectionStart).pop())===null||T===void 0?void 0:T.match(ye);if(W!=null&&W[1]&&(!((B=Ne==null?void 0:Ne[1])===null||B===void 0)&&B.startsWith(W[1]))){I.current.stack[I.current.offset]=G(G({},d),{timestamp:ne});return}}}I.current.stack.push(G(G({},d),{timestamp:ne})),I.current.offset++},[]),ue=Q.useCallback(function(){var d=k.current;if(d){var L=d.value,j=d.selectionStart,T=d.selectionEnd;ae({value:L,selectionStart:j,selectionEnd:T})}},[ae]),ce=function(d){var L=k.current;L&&(L.value=d.value,L.selectionStart=d.selectionStart,L.selectionEnd=d.selectionEnd,a==null||a(d.value))},se=function(d){var L=k.current,j=I.current.stack[I.current.offset];j&&L&&(I.current.stack[I.current.offset]=G(G({},j),{selectionStart:L.selectionStart,selectionEnd:L.selectionEnd})),ae(d),ce(d)},we=function(){var d=I.current,L=d.stack,j=d.offset,T=L[j-1];T&&(ce(T),I.current.offset=Math.max(j-1,0))},ve=function(){var d=I.current,L=d.stack,j=d.offset,T=L[j+1];T&&(ce(T),I.current.offset=Math.min(j+1,L.length-1))},he=function(d){if(!(w&&(w(d),d.defaultPrevented))){d.key==="Escape"&&d.currentTarget.blur();var L=d.currentTarget,j=L.value,T=L.selectionStart,B=L.selectionEnd,Y=(F?" ":"	").repeat(D);if(d.key==="Tab"&&!A&&S)if(d.preventDefault(),d.shiftKey){var ie=z(j,T),be=ie.length-1,Ee=z(j,B).length-1,xe=j.split(`
`).map(function(Se,_e){return _e>=be&&_e<=Ee&&Se.startsWith(Y)?Se.substring(Y.length):Se}).join(`
`);if(j!==xe){var ne=ie[be];se({value:xe,selectionStart:ne!=null&&ne.startsWith(Y)?T-Y.length:T,selectionEnd:B-(j.length-xe.length)})}}else if(T!==B){var ie=z(j,T),de=ie.length-1,ye=z(j,B).length-1,ne=ie[de];se({value:j.split(`
`).map(function(Be,$e){return $e>=de&&$e<=ye?Y+Be:Be}).join(`
`),selectionStart:ne&&/\S/.test(ne)?T+Y.length:T,selectionEnd:B+Y.length*(ye-de+1)})}else{var W=T+Y.length;se({value:j.substring(0,T)+Y+j.substring(B),selectionStart:W,selectionEnd:W})}else if(d.key==="Backspace"){var Ne=T!==B,ht=j.substring(0,T);if(ht.endsWith(Y)&&!Ne){d.preventDefault();var W=T-Y.length;se({value:j.substring(0,T-Y.length)+j.substring(B),selectionStart:W,selectionEnd:W})}}else if(d.key==="Enter"){if(T===B){var De=z(j,T).pop(),Te=De==null?void 0:De.match(/^\s+/);if(Te!=null&&Te[0]){d.preventDefault();var Ue=`
`+Te[0],W=T+Ue.length;se({value:j.substring(0,T)+Ue+j.substring(B),selectionStart:W,selectionEnd:W})}}}else if(d.keyCode===Ye||d.keyCode===qe||d.keyCode===We||d.keyCode===Qe){var oe=void 0;d.keyCode===Ye&&d.shiftKey?oe=["(",")"]:d.keyCode===qe?d.shiftKey?oe=["{","}"]:oe=["[","]"]:d.keyCode===We?d.shiftKey?oe=['"','"']:oe=["'","'"]:d.keyCode===Qe&&!d.shiftKey&&(oe=["`","`"]),T!==B&&oe&&(d.preventDefault(),se({value:j.substring(0,T)+oe[0]+j.substring(T,B)+oe[1]+j.substring(B),selectionStart:T,selectionEnd:B+2}))}else(Pe?d.metaKey&&d.keyCode===Oe:d.ctrlKey&&d.keyCode===Oe)&&!d.shiftKey&&!d.altKey?(d.preventDefault(),we()):(Pe?d.metaKey&&d.keyCode===Oe&&d.shiftKey:aa?d.ctrlKey&&d.keyCode===Jt:d.ctrlKey&&d.keyCode===Oe&&d.shiftKey)&&!d.altKey?(d.preventDefault(),ve()):d.keyCode===ea&&d.ctrlKey&&(!Pe||d.shiftKey)&&(d.preventDefault(),q(function(Se){return!Se}))}},Fe=function(d){var L=d.currentTarget,j=L.value,T=L.selectionStart,B=L.selectionEnd;ae({value:j,selectionStart:T,selectionEnd:B},!0),a(j)};return Q.useEffect(function(){ue()},[ue]),Q.useImperativeHandle(t,function(){return{get session(){return{history:I.current}},set session(d){I.current=d.history}}},[]),Q.createElement("div",G({},le,{style:G(G({},je.container),m)}),Q.createElement("pre",G({className:p,"aria-hidden":"true",style:G(G(G({},je.editor),je.highlight),$)},typeof me=="string"?{dangerouslySetInnerHTML:{__html:me+"<br />"}}:{children:me})),Q.createElement("textarea",{ref:function(d){return k.current=d},style:G(G(G({},je.editor),je.textarea),$),className:ke+(H?" ".concat(H):""),id:J,value:te,onChange:Fe,onKeyDown:he,onClick:N,onKeyUp:s,onFocus:v,onBlur:M,disabled:x,form:O,maxLength:P,minLength:_,name:C,placeholder:u,readOnly:y,required:i,autoFocus:c,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),Q.createElement("style",{dangerouslySetInnerHTML:{__html:sa}}))}),je={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},ra=ut.default=na,gt={exports:{}};(function(o){var n=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(c){var x=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,O=0,E={},g={manual:c.Prism&&c.Prism.manual,disableWorkerMessageHandler:c.Prism&&c.Prism.disableWorkerMessageHandler,util:{encode:function s(a){return a instanceof A?new A(a.type,s(a.content),a.alias):Array.isArray(a)?a.map(s):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(s){return Object.prototype.toString.call(s).slice(8,-1)},objId:function(s){return s.__id||Object.defineProperty(s,"__id",{value:++O}),s.__id},clone:function s(a,r){r=r||{};var l,u;switch(g.util.type(a)){case"Object":if(u=g.util.objId(a),r[u])return r[u];l={},r[u]=l;for(var p in a)a.hasOwnProperty(p)&&(l[p]=s(a[p],r));return l;case"Array":return u=g.util.objId(a),r[u]?r[u]:(l=[],r[u]=l,a.forEach(function(y,i){l[i]=s(y,r)}),l);default:return a}},getLanguage:function(s){for(;s;){var a=x.exec(s.className);if(a)return a[1].toLowerCase();s=s.parentElement}return"none"},setLanguage:function(s,a){s.className=s.className.replace(RegExp(x,"gi"),""),s.classList.add("language-"+a)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(l){var s=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(l.stack)||[])[1];if(s){var a=document.getElementsByTagName("script");for(var r in a)if(a[r].src==s)return a[r]}return null}},isActive:function(s,a,r){for(var l="no-"+a;s;){var u=s.classList;if(u.contains(a))return!0;if(u.contains(l))return!1;s=s.parentElement}return!!r}},languages:{plain:E,plaintext:E,text:E,txt:E,extend:function(s,a){var r=g.util.clone(g.languages[s]);for(var l in a)r[l]=a[l];return r},insertBefore:function(s,a,r,l){l=l||g.languages;var u=l[s],p={};for(var y in u)if(u.hasOwnProperty(y)){if(y==a)for(var i in r)r.hasOwnProperty(i)&&(p[i]=r[i]);r.hasOwnProperty(y)||(p[y]=u[y])}var m=l[s];return l[s]=p,g.languages.DFS(g.languages,function(b,D){D===m&&b!=s&&(this[b]=p)}),p},DFS:function s(a,r,l,u){u=u||{};var p=g.util.objId;for(var y in a)if(a.hasOwnProperty(y)){r.call(a,y,a[y],l||y);var i=a[y],m=g.util.type(i);m==="Object"&&!u[p(i)]?(u[p(i)]=!0,s(i,r,null,u)):m==="Array"&&!u[p(i)]&&(u[p(i)]=!0,s(i,r,y,u))}}},plugins:{},highlightAll:function(s,a){g.highlightAllUnder(document,s,a)},highlightAllUnder:function(s,a,r){var l={callback:r,container:s,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};g.hooks.run("before-highlightall",l),l.elements=Array.prototype.slice.apply(l.container.querySelectorAll(l.selector)),g.hooks.run("before-all-elements-highlight",l);for(var u=0,p;p=l.elements[u++];)g.highlightElement(p,a===!0,l.callback)},highlightElement:function(s,a,r){var l=g.util.getLanguage(s),u=g.languages[l];g.util.setLanguage(s,l);var p=s.parentElement;p&&p.nodeName.toLowerCase()==="pre"&&g.util.setLanguage(p,l);var y=s.textContent,i={element:s,language:l,grammar:u,code:y};function m(D){i.highlightedCode=D,g.hooks.run("before-insert",i),i.element.innerHTML=i.highlightedCode,g.hooks.run("after-highlight",i),g.hooks.run("complete",i),r&&r.call(i.element)}if(g.hooks.run("before-sanity-check",i),p=i.element.parentElement,p&&p.nodeName.toLowerCase()==="pre"&&!p.hasAttribute("tabindex")&&p.setAttribute("tabindex","0"),!i.code){g.hooks.run("complete",i),r&&r.call(i.element);return}if(g.hooks.run("before-highlight",i),!i.grammar){m(g.util.encode(i.code));return}if(a&&c.Worker){var b=new Worker(g.filename);b.onmessage=function(D){m(D.data)},b.postMessage(JSON.stringify({language:i.language,code:i.code,immediateClose:!0}))}else m(g.highlight(i.code,i.grammar,i.language))},highlight:function(s,a,r){var l={code:s,grammar:a,language:r};if(g.hooks.run("before-tokenize",l),!l.grammar)throw new Error('The language "'+l.language+'" has no grammar.');return l.tokens=g.tokenize(l.code,l.grammar),g.hooks.run("after-tokenize",l),A.stringify(g.util.encode(l.tokens),l.language)},tokenize:function(s,a){var r=a.rest;if(r){for(var l in r)a[l]=r[l];delete a.rest}var u=new P;return _(u,u.head,s),F(s,u,a,u.head,0),M(u)},hooks:{all:{},add:function(s,a){var r=g.hooks.all;r[s]=r[s]||[],r[s].push(a)},run:function(s,a){var r=g.hooks.all[s];if(!(!r||!r.length))for(var l=0,u;u=r[l++];)u(a)}},Token:A};c.Prism=g;function A(s,a,r,l){this.type=s,this.content=a,this.alias=r,this.length=(l||"").length|0}A.stringify=function s(a,r){if(typeof a=="string")return a;if(Array.isArray(a)){var l="";return a.forEach(function(m){l+=s(m,r)}),l}var u={type:a.type,content:s(a.content,r),tag:"span",classes:["token",a.type],attributes:{},language:r},p=a.alias;p&&(Array.isArray(p)?Array.prototype.push.apply(u.classes,p):u.classes.push(p)),g.hooks.run("wrap",u);var y="";for(var i in u.attributes)y+=" "+i+'="'+(u.attributes[i]||"").replace(/"/g,"&quot;")+'"';return"<"+u.tag+' class="'+u.classes.join(" ")+'"'+y+">"+u.content+"</"+u.tag+">"};function U(s,a,r,l){s.lastIndex=a;var u=s.exec(r);if(u&&l&&u[1]){var p=u[1].length;u.index+=p,u[0]=u[0].slice(p)}return u}function F(s,a,r,l,u,p){for(var y in r)if(!(!r.hasOwnProperty(y)||!r[y])){var i=r[y];i=Array.isArray(i)?i:[i];for(var m=0;m<i.length;++m){if(p&&p.cause==y+","+m)return;var b=i[m],D=b.inside,H=!!b.lookbehind,J=!!b.greedy,te=b.alias;if(J&&!b.pattern.global){var le=b.pattern.toString().match(/[imsuy]*$/)[0];b.pattern=RegExp(b.pattern.source,le+"g")}for(var I=b.pattern||b,k=l.next,f=u;k!==a.tail&&!(p&&f>=p.reach);f+=k.value.length,k=k.next){var S=k.value;if(a.length>s.length)return;if(!(S instanceof A)){var q=1,$;if(J){if($=U(I,f,s,H),!$||$.index>=s.length)break;var ue=$.index,me=$.index+$[0].length,z=f;for(z+=k.value.length;ue>=z;)k=k.next,z+=k.value.length;if(z-=k.value.length,f=z,k.value instanceof A)continue;for(var ae=k;ae!==a.tail&&(z<me||typeof ae.value=="string");ae=ae.next)q++,z+=ae.value.length;q--,S=s.slice(f,z),$.index-=f}else if($=U(I,0,S,H),!$)continue;var ue=$.index,ce=$[0],se=S.slice(0,ue),we=S.slice(ue+ce.length),ve=f+S.length;p&&ve>p.reach&&(p.reach=ve);var he=k.prev;se&&(he=_(a,he,se),f+=se.length),C(a,he,q);var Fe=new A(y,D?g.tokenize(ce,D):ce,te,ce);if(k=_(a,he,Fe),we&&_(a,k,we),q>1){var d={cause:y+","+m,reach:ve};F(s,a,r,k.prev,f,d),p&&d.reach>p.reach&&(p.reach=d.reach)}}}}}}function P(){var s={value:null,prev:null,next:null},a={value:null,prev:s,next:null};s.next=a,this.head=s,this.tail=a,this.length=0}function _(s,a,r){var l=a.next,u={value:r,prev:a,next:l};return a.next=u,l.prev=u,s.length++,u}function C(s,a,r){for(var l=a.next,u=0;u<r&&l!==s.tail;u++)l=l.next;a.next=l,l.prev=a,s.length-=u}function M(s){for(var a=[],r=s.head.next;r!==s.tail;)a.push(r.value),r=r.next;return a}if(!c.document)return c.addEventListener&&(g.disableWorkerMessageHandler||c.addEventListener("message",function(s){var a=JSON.parse(s.data),r=a.language,l=a.code,u=a.immediateClose;c.postMessage(g.highlight(l,g.languages[r],r)),u&&c.close()},!1)),g;var N=g.util.currentScript();N&&(g.filename=N.src,N.hasAttribute("data-manual")&&(g.manual=!0));function v(){g.manual||g.highlightAll()}if(!g.manual){var w=document.readyState;w==="loading"||w==="interactive"&&N&&N.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return g}(n);o.exports&&(o.exports=t),typeof Z<"u"&&(Z.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(c){c.type==="entity"&&(c.attributes.title=c.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(x,O){var E={};E["language-"+O]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[O]},E.cdata=/^<!\[CDATA\[|\]\]>$/i;var g={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:E}};g["language-"+O]={pattern:/[\s\S]+/,inside:t.languages[O]};var A={};A[x]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return x}),"i"),lookbehind:!0,greedy:!0,inside:g},t.languages.insertBefore("markup","cdata",A)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(c,x){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+c+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[x,"language-"+x],inside:t.languages[x]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(c){var x=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;c.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+x.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+x.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+x.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+x.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:x,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},c.languages.css.atrule.inside.rest=c.languages.css;var O=c.languages.markup;O&&(O.tag.addInlined("style","css"),O.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var c="Loading…",x=function(N,v){return"✖ Error "+N+" while fetching file: "+v},O="✖ Error: File does not exist or is empty",E={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},g="data-src-status",A="loading",U="loaded",F="failed",P="pre[data-src]:not(["+g+'="'+U+'"]):not(['+g+'="'+A+'"])';function _(N,v,w){var s=new XMLHttpRequest;s.open("GET",N,!0),s.onreadystatechange=function(){s.readyState==4&&(s.status<400&&s.responseText?v(s.responseText):s.status>=400?w(x(s.status,s.statusText)):w(O))},s.send(null)}function C(N){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(N||"");if(v){var w=Number(v[1]),s=v[2],a=v[3];return s?a?[w,Number(a)]:[w,void 0]:[w,w]}}t.hooks.add("before-highlightall",function(N){N.selector+=", "+P}),t.hooks.add("before-sanity-check",function(N){var v=N.element;if(v.matches(P)){N.code="",v.setAttribute(g,A);var w=v.appendChild(document.createElement("CODE"));w.textContent=c;var s=v.getAttribute("data-src"),a=N.language;if(a==="none"){var r=(/\.(\w+)$/.exec(s)||[,"none"])[1];a=E[r]||r}t.util.setLanguage(w,a),t.util.setLanguage(v,a);var l=t.plugins.autoloader;l&&l.loadLanguages(a),_(s,function(u){v.setAttribute(g,U);var p=C(v.getAttribute("data-range"));if(p){var y=u.split(/\r\n?|\n/g),i=p[0],m=p[1]==null?y.length:p[1];i<0&&(i+=y.length),i=Math.max(0,Math.min(i-1,y.length)),m<0&&(m+=y.length),m=Math.max(0,Math.min(m,y.length)),u=y.slice(i,m).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(i+1))}w.textContent=u,t.highlightElement(w)},function(u){v.setAttribute(g,F),w.textContent=u})}}),t.plugins.fileHighlight={highlight:function(v){for(var w=(v||document).querySelectorAll(P),s=0,a;a=w[s++];)t.highlightElement(a)}};var M=!1;t.fileHighlight=function(){M||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),M=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(gt);var Xe=gt.exports;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const Ze=({statement:o,className:n,setStatement:t,disabled:c,uri:x})=>{const{modal:O}=rt.useApp(),[E,g]=R.useState("prism"),[A,U]=R.useState(o.statement),[F,P]=R.useState(""),_=v=>{U(v),t&&t({...o,statement:v})},C=v=>{g(v)};R.useEffect(()=>{U(o.statement)},[o]),R.useEffect(()=>{P(o.result||"")},[o]);const M={fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14,border:"1px solid transparent",backgroundColor:E==="prism-tomorrow"?"#2d2d2d":E==="prism-okaidia"?"#272822":E==="prism-solarizedlight"?"#fdf6e3":E==="prism-coy"?"#f5f2f0":E==="prism-twilight"?"#141414":E==="prism-dark"?"#1e1e1e":"#f5f2f0",color:E==="prism-tomorrow"||E==="prism-okaidia"?"#f8f8f2":E==="prism-solarizedlight"?"#657b83":E==="prism-coy"?"#000":E==="prism-twilight"||E==="prism-dark"?"#f8f8f2":"#000"},N=()=>{O&&O.confirm({title:"Run Statement",content:"Are you sure you want to run this statement? We don’t responsibility for any data loss or damage.",okText:"Yes",cancelText:"No",onOk:async()=>{try{if(!x)return;const{data:v}=await re.post("/pyhelper/run-statement",{statement:A,uri:x});Ut.info(v.result)}catch(v){console.log(v)}},onCancel:()=>{}})};return e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee.Text,{className:"block",children:o.title})," ",e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(ee.Text,{className:"block",children:"Theme"}),e.jsxs(V,{onChange:C,size:"small",className:"w-[120px]",defaultValue:"prism",children:[e.jsx(V.Option,{value:"prism",children:"Default"}),e.jsx(V.Option,{value:"prism-tomorrow",children:"Tomorrow"}),e.jsx(V.Option,{value:"prism-okaidia",children:"Okaidia"}),e.jsx(V.Option,{value:"prism-solarizedlight",children:"Solarized Light"}),e.jsx(V.Option,{value:"prism-coy",children:"Coy"}),e.jsx(V.Option,{value:"prism-twilight",children:"Twilight"}),e.jsx(V.Option,{value:"prism-dark",children:"Dark"})]})]})]}),e.jsxs("div",{className:`${E} ${n} relative rounded`,children:[e.jsx(ra,{value:A,onValueChange:_,className:"overflow-hidden rounded p-4",highlight:v=>Xe.highlight(v,Xe.languages.sql,"sql"),padding:10,style:M,disabled:c,textareaClassName:"border-none outline-none"}),e.jsxs("div",{className:"absolute right-2 top-2",children:[x&&e.jsx(ia,{onClick:N}),e.jsx(la,{link:A})]})]}),F&&e.jsx("div",{children:e.jsxs("span",{children:["Result: ",F]})})]})};function la(o){const{className:n,link:t}=o,[c,x]=R.useState(!1),O=()=>{navigator.clipboard.writeText(t),x(!0),setTimeout(()=>{x(!1)},3e3)},E=c?St:_t;return e.jsx(fe,{title:c?"Copied":"Copy",children:e.jsx(K,{htmlType:"button",type:"default",onClick:O,disabled:c,icon:e.jsx(E,{className:Le("size-4 text-black",{"text-green-500":c})}),className:Le("z-10 flex items-center justify-center bg-white ",n)})})}function ia({className:o,onClick:n}){return e.jsx(fe,{title:"Run statement",className:"mr-2",children:e.jsx(K,{htmlType:"button",type:"default",onClick:n,icon:e.jsx(Bt,{className:Le("size-4 text-black")}),className:Le("z-10 flex items-center justify-center bg-white ",o)})})}const oa="/assets/blink-ai-oa0wz64P.png",Je=({resultDOM:o})=>{var n;(n=o.current)==null||n.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},ca=async o=>{const{projectId:n,context:t,question:c}=o,{data:x}=await re.post(`/projects/${n}/database-rag`,{context:t,question:c});return x},da=()=>pe({mutationFn:ca}),ua=async o=>{const{projectId:n,uri:t,question:c}=o,{data:x}=await re.post(`/projects/${n}/database-rag-by-uri`,{uri:t,question:c});return x},ga=()=>pe({mutationFn:ua}),ha=async o=>{const{projectId:n,statement:t}=o,{data:c}=await re.post(`/projects/${n}/save-db-structure`,{statement:t});return c},xa=()=>pe({mutationFn:ha,onSuccess:()=>{X.success("Save DB structure success")}}),fa=async o=>{const{projectId:n,uri:t}=o,{data:c}=await re.post(`/projects/${n}/get-structure-by-uri`,{uri:t});return c},pa=()=>pe({mutationFn:fa,onSuccess:()=>{X.success("Connect db success")}}),ma=async o=>{const n=new FormData;n.append("file",o);const{data:t}=await re.post("/pyhelper/file-handler",n,{headers:{"Content-Type":"multipart/form-data"}});return t},va=()=>pe({mutationFn:ma,onSuccess:()=>{X.success("Upload file success")}}),ba=["MySQL","SQLite","PostgreSQL","Oracle","SQLServer"],ge={MySQL:{label:"My SQL",value:"MySQL",before:"mysql+mysqlconnector://",placeholder:"<username>:<password>@<host>/<database>"},SQLite:{label:"SQLite",value:"SQLite",before:"sqlite://",placeholder:"<path>"}},Ea=()=>{const[o]=Ae.useForm(),[n,t]=R.useState({statement:"",title:""}),[c,x]=R.useState("MySQL"),[O,E]=R.useState(!1),[g,A]=R.useState(""),[U,F]=R.useState(!0),[P,_]=R.useState([]),[C,M]=R.useState("MySQL"),N=R.useRef(null),v=R.useRef(null),[w,s]=R.useState(2),a=nt(),{btnColor:r}=Me(f=>f.theme),{mutate:l,isPending:u}=da(),{mutate:p,isPending:y}=ga(),{mutate:i,isPending:m}=xa(),{mutate:b,isPending:D}=pa(),{mutate:H}=va(),J=async f=>{try{w!==3?(f.database=f.database??"MySQL",l({projectId:a,context:n.statement,question:f.question},{onSuccess:S=>{Je({resultDOM:v}),_(S.statements)},onError:S=>{X.error(S.message)}})):p({projectId:a,uri:`${ge[C].before}${g}`,question:f.question},{onSuccess:S=>{Je({resultDOM:v}),_([S])},onError:S=>{X.error(S.message)}})}finally{}},te=async()=>{i({projectId:a,statement:n.statement})},le=async()=>{b({projectId:a,uri:`${ge[C].before}${g}`},{onSuccess:f=>{t({...n,statement:f.schema})},onError:f=>{X.error(f.message)}})},I=async()=>{E(!0);try{const{data:f}=await re.get(`/projects/${a}/generate-structure?database=${c}`);console.log(f),t({...n,statement:f.statement})}catch(f){typeof f=="object"&&f!==null&&"response"in f&&X.error(f.response.data.message)}finally{E(!1)}};R.useEffect(()=>{n.statement?"#Enter your SQL Structure here".includes(n.statement.trim())?F(!0):F(!1):F(!0)},[n]),R.useEffect(()=>{(async()=>{try{const{data:S}=await re.get(`/projects/${a}/get-db-structure`);t({...n,statement:S.statement})}catch(S){typeof S=="object"&&S!==null&&"response"in S&&X.error(S.response.data.message)}})()},[]),R.useEffect(()=>{w===3&&t({...n,statement:""})},[w]);const k={name:"file",multiple:!1,accept:".sql",beforeUpload:async f=>(H(f,{onSuccess:S=>{t({...n,statement:S.result})},onError:S=>{X.error(S.message)}}),!1),listType:"text"};return e.jsxs("section",{ref:N,className:"flex h-[calc(100vh-170px)] w-full flex-col overflow-y-scroll rounded bg-[#f8f9fc] px-6 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl text-black",children:"Database Structure:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-2",children:[e.jsxs("div",{className:"col-span-1 mx-2 flex flex-col gap-y-2",children:[e.jsx(Ze,{className:"max-h-[300px] min-h-[120px] overflow-y-scroll",statement:n,setStatement:t}),e.jsx("div",{className:"my-2 flex w-full justify-end",children:e.jsx(K,{type:"text",style:{backgroundColor:r,color:"#fff"},className:"flex items-center",disabled:w===3||U,loading:m,icon:e.jsx(lt,{size:16}),onClick:te,children:"Save"})})]}),e.jsxs("div",{className:"col-span-1 flex flex-col gap-2 border border-y-0 border-r-0 border-solid border-l-slate-200 pl-3 text-black",children:[e.jsx(ee.Text,{children:"Or you can get the database based on the following ways:"}),e.jsx("div",{children:e.jsxs(Re.Group,{className:"flex w-full",defaultValue:2,onChange:f=>{s(f.target.value)},children:[e.jsx(Re.Button,{className:"w-full text-center",value:1,children:"Upload file (.sql)"}),e.jsx(Re.Button,{className:"w-full text-center",value:2,children:"Generate by SRS"}),e.jsx(Re.Button,{className:"w-full text-center",value:3,children:"Connect to database"})]})}),e.jsxs("div",{className:"mt-4 max-h-[250px]",children:[w===1&&e.jsx(jt,{...k,style:{backgroundColor:"#eff4f8"},children:e.jsxs("div",{className:"flex items-center justify-center gap-5",children:[e.jsx("div",{className:"ant-upload-drag-icon",children:e.jsx("div",{style:{borderColor:r},className:"mx-auto flex h-16 w-16 items-center justify-center rounded-lg border-2 border-dashed bg-transparent",children:e.jsx(Ct,{size:24,className:"",style:{color:r}})})}),e.jsxs("div",{className:"flex flex-col gap-y-4 py-3 text-left",children:[e.jsx(ee.Text,{className:"block font-semibold ",style:{color:r},children:"Select files on your computer"}),e.jsx(ee.Text,{className:"block text-slate-400",children:"Or transfer files by dragging and dropping them into the area"})]})]})}),w===2&&e.jsxs("div",{className:"my-4 flex h-full w-full items-center justify-end gap-x-4",children:[e.jsx(K,{loading:O,size:"large",icon:e.jsx(et,{}),style:{backgroundColor:r,color:"#fff"},className:"flex items-center rounded-xl text-center",onClick:I,children:"Generate DB Structure"}),e.jsx(V,{value:c,onChange:f=>{x(f)},size:"large",allowClear:!0,className:"min-w-[200px]",children:ba.map(f=>e.jsx(V.Option,{value:f,children:f},"select_sql_generate"))})]}),w===3&&e.jsxs("div",{className:"flex w-full flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{children:"SQL Type: "}),e.jsx(V,{value:ge[C].value,onChange:f=>{M(f)},className:"ml-2 w-[150px]",children:Object.values(ge).map(f=>e.jsx(V.Option,{value:f.value,children:f.label},f.value))})]}),e.jsx(Ce.Search,{className:"my-4 w-full text-xs",addonBefore:ge[C].before,placeholder:ge[C].placeholder,allowClear:!0,value:g,onChange:f=>A(f.target.value),onSearch:le,enterButton:"Connect",loading:D})]})]})]})]})]}),e.jsx(He,{className:"m-0 my-4"}),e.jsx("div",{className:"card-ai flex flex-col gap-y-10 rounded-lg bg-white p-6",children:e.jsxs(Ae,{name:"sql-query",form:o,layout:"vertical",onFinish:J,children:[e.jsx(Ae.Item,{name:"question",label:"Write here what you want from your document:",rules:[{required:!0,message:"Please input your question!"}],children:e.jsx(Ce,{prefix:e.jsx("img",{src:oa,className:"absolute left-4 top-3 h-5 w-5",alt:""}),size:"large",allowClear:!0,placeholder:"Find all customers who have ordered more than 10 products in the last 6 months",className:"rounded-xl py-3 pl-12"})}),e.jsx("div",{className:"float-right flex h-[auto] items-center justify-center",children:e.jsx(Ae.Item,{className:"flex w-full flex-shrink",children:e.jsx(K,{icon:e.jsx(et,{}),style:{backgroundColor:r,color:"#fff",width:"100%"},size:"large",htmlType:"submit",loading:u||y,className:"flex items-center rounded-xl",disabled:u||y,children:"Generate SQL"})})})]})}),e.jsx(He,{}),e.jsx("div",{className:"w-full text-black",children:P.map((f,S)=>e.jsxs("div",{children:[e.jsx(ee.Text,{className:"text-lg",children:"Result:"}),e.jsx(Ze,{statement:f,uri:g?`${ge[C].before}${g}`:""},S)]},S))}),e.jsx("div",{ref:v,className:"h-60"})]})},et=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",className:"-ml-1 mr-2 h-6 w-6 text-gray-100",children:e.jsx("path",{"fill-rule":"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z","clip-rule":"evenodd"})}),Ta=()=>{const o=t=>{console.log(t)},n=[{key:"1",label:"Task Generate",children:e.jsx(qt,{})},{key:"2",label:"SQL Generate",children:e.jsx(Ea,{})}];return e.jsx("section",{className:"",children:e.jsx("div",{className:"col-span-5 mx-2 -translate-y-5",children:e.jsx(wt,{onChange:o,tabBarGutter:12,className:"custom-tabs-ai mb-0  text-white",items:n})})})};export{Ta as default};
