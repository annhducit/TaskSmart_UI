import{j as e,h as N,k as I,T as p,l as x,R as D,aX as y,p as j,U as L,r as C,m as B,n as F,I as w,B as r,E as M,P as U}from"./index-bcifMYEQ.js";import{u as T,C as k,P as z,S as V,T as _}from"./popover-BSl-E8wt.js";import{u as G}from"./use-search-params-Bty0Q4Dj.js";import{T as H}from"./text-BZj7_MT7.js";function O({card:s}){var o;const c=G(),{setNodeRef:l,attributes:d,listeners:i,transform:h,transition:f,isDragging:n}=T({id:s.id,data:{type:"Task",card:s}}),m={transition:f,transform:k.Transform.toString(h)};return n?e.jsx("div",{ref:l,style:m,className:"relative flex h-[100px] min-h-[170px] cursor-grab items-start rounded-xl bg-black/50 p-2.5 text-left opacity-30 hover:ring-2 hover:ring-inset hover:ring-primary-default"}):e.jsx(e.Fragment,{children:e.jsxs("div",{ref:l,style:m,...d,...i,onClick:()=>c.set({[N.DIALOG]:I.CARD,[N.ID]:s.id}),className:"flex cursor-pointer flex-col rounded-lg border border-solid border-slate-300 shadow-lg transition-all hover:border-[2px] hover:border-primary-default",children:[e.jsx("div",{className:"h-[115px] w-full rounded-t-[6px]",style:{backgroundColor:`#${s.color||"1677ff"}`}}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded-b-xl",children:[e.jsx("div",{className:"flex flex-col gap-y-1",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsx(p.Text,{className:"w-[140px] truncate text-xs font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(x,{title:"The card already has a description",color:"black",placement:"bottom",children:e.jsx("div",{className:"flex items-center rounded-sm  p-1 transition-all hover:bg-[#091E4224]",children:e.jsx(H,{className:"w-3 h-3 text-slate-500"})})}),e.jsx(x,{color:"black",title:"Followed",placement:"bottom",children:e.jsx("div",{className:"flex items-center rounded-sm p-1 transition-all hover:bg-[#091E4224]",children:e.jsx(D,{className:"w-3 h-3 text-slate-500"})})}),e.jsx(x,{color:"black",title:"Attactments",className:"text-[10px]",placement:"bottom",children:e.jsxs("div",{className:"flex items-center rounded-sm p-[2px] transition-all hover:bg-[#091E4224]",children:[e.jsx(z,{className:"w-3 h-3 text-slate-500"}),e.jsx(p.Text,{className:"ml-[1px] text-xs",children:"3"})]})})]})]})}),e.jsx("div",{className:"flex items-center",children:(o=s.implementers)==null?void 0:o.map(a=>e.jsx(y.Group,{maxCount:2,size:"small",children:e.jsx(x,{title:a.name,children:e.jsx(j,{trigger:"click",placement:"bottom",children:e.jsx(y,{src:`http://localhost:8888/api/image/${a.profileImagePath}`,icon:e.jsx(L,{size:"12"})})})},a.userId)},a.userId))})]})]})})}const K=({column:s,cards:c,updateColumn:l,deleteColumn:d,createCard:i})=>{const h=C.useMemo(()=>c.map(t=>t.id),[c]),f={id:"",name:"",color:"",description:"",status:"none",priority:"none",risk:"none",effort:"none",estimate:new Date,checkLists:[],attachments:[],comments:[],implementers:[],startTime:new Date},[n,m]=C.useState(f),[u,o]=B(!1),a=t=>{m({...n,name:t})},{setNodeRef:g,attributes:A,listeners:E,transform:S,transition:P,isDragging:v}=T({id:s.id,data:{type:"Column",column:s}}),b={transition:P,transform:k.Transform.toString(S)},R=F(t=>t.theme.btnColor);return e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{ref:g,style:b,className:"flex h-[520px] w-[275px] flex-col items-center rounded-xl border-none bg-[#ffffff3d]"}),!v&&e.jsx(e.Fragment,{children:e.jsxs("div",{ref:g,style:b,className:"flex max-h-[520px] w-[275px] cursor-move flex-col gap-y-2 rounded-xl bg-white p-2 shadow-lg",children:[e.jsxs("div",{...A,...E,className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(w,{allowClear:!0,type:"text",defaultValue:s.name,className:"cursor-pointer rounded-xl border-none text-base font-bold transition-all",onPressEnter:t=>{l&&l({...s,name:t.currentTarget.value})},onBlur:t=>{l&&l({...s,name:t.target.value})}})}),e.jsx(j,{placement:"rightTop",trigger:"click",title:e.jsx("div",{className:"text-center font-semibold",children:"Behavior"}),content:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(r,{type:"default",className:"text-left text-xs",children:"Add Card"}),e.jsx(r,{type:"default",className:"text-left text-xs ",children:"Add List"}),e.jsx(r,{type:"default",className:"text-left text-xs ",children:"Copy List"}),e.jsx(r,{type:"default",className:"text-left text-xs ",children:"Move List"}),e.jsx(r,{type:"default",className:"text-left text-xs ",children:"Archive List"})]}),children:e.jsx("div",{className:"rounded px-1 transition-all hover:bg-[#091E4224]",children:e.jsx(M,{className:"mt-1 h-5 w-5 text-slate-500"})})})]}),e.jsx("div",{className:"flex max-h-[420px] flex-col gap-y-2 overflow-y-scroll",children:e.jsx(V,{items:h,children:c.map(t=>e.jsx(O,{card:t},t.id))})}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(j,{trigger:"click",onOpenChange:o,open:u,content:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(p.Text,{className:"text-xs",children:"Create new card"}),e.jsx(w,{onChange:t=>a(t.target.value),value:n.name,placeholder:"Enter card title",onPressEnter:i&&(()=>{i(s.id,n),o(!1),a("")})}),e.jsx(r,{type:"primary",size:"small",className:"w-full text-white",onClick:i&&(()=>{i(s.id,n),o(!1),a("")}),style:{backgroundColor:R,color:"#fff"},children:"Add Card"})]}),children:e.jsx(r,{type:"dashed",icon:e.jsx(U,{className:"h-4 w-4"}),className:"flex w-full items-center rounded-xl",children:"Add Card"})}),e.jsx(x,{title:"Remove card",children:e.jsx("div",{className:"cursor-pointer rounded px-1 transition-all hover:bg-[#091E4224]",children:e.jsx(_,{onClick:d&&(()=>{d(s.id)}),className:"mt-1 h-4 w-4 text-slate-500"})})})]})]})})]})};export{K as C,O as T};
