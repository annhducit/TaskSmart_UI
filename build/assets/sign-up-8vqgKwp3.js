import{c as I,b as z,a as k,d as C,i as E,t as N,r as o,F as a,j as e,T as t,L as V,o as q,I as r,M as L,U as g,S as D,P as M,B as d,A as j}from"./index-bcifMYEQ.js";import{L as y}from"./lock-C_boSCQ3.js";import{A as R}from"./arrow-right-BonmXGU5.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=I("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);async function Z(s){return await N.post("/users",s)}function $(){const{notification:s}=z.useApp(),c=k();return C({async mutationFn(i){return await Z(i)},onSuccess(i){E(i.status)?(s.success({message:"Account created successfully"}),c("/auth/sign-in")):s.error({message:"Cannot create account",description:i.status})}})}const W=()=>{const[s,c]=o.useState(1),[i,x]=o.useState(60),[u,h]=o.useState(!1),{mutate:w,isPending:b}=$(),[v,P]=o.useState({}),[S,F]=o.useState(!1),[l]=a.useForm(),T=async m=>{const{verifyCode:n}=m;w({...v,verifyCode:n})},f=async()=>{const m=l.getFieldValue("email");await N.post(`/verify?email=${m}`).then(n=>{(n.status===200||n.status===201)&&(F(!0),j.success("Email was send successfully"))}).catch(()=>{j.error("Email sent failed")})},A=()=>{l.validateFields().then(m=>{if(P(m),l.getFieldValue("password")!==l.getFieldValue("confirmPassword")){l.setFields([{name:"confirmPassword",errors:["Password and confirm password must be the same"]}]);return}f(),c(2),h(!0);const n=setInterval(()=>{x(p=>p===0?(clearInterval(n),h(!1),60):p-1)},1e3)})};return e.jsx("div",{className:`${s===1?"top-6 w-[600px]":"top-10 w-[450px]"} absolute right-24  rounded-lg bg-white shadow-lg`,children:e.jsx("div",{className:"p-10",children:e.jsxs("div",{className:"flex flex-col gap-y-10",children:[s===1&&e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsxs(t.Text,{className:"text-2xl font-semibold",children:["Welcome to ",e.jsx("span",{className:"capitalize text-[#0089ED]",children:"TaskSmart"})]}),e.jsx(t.Text,{className:"text-5xl font-semibold ",children:"Sign up"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(t.Text,{className:"text-sm",children:"Have an Account ?"}),e.jsx(V,{to:"../sign-in",children:e.jsx(t.Text,{className:"cursor-pointer font-semibold text-[#0089ED] transition-all hover:underline",children:"Sign in"})})]})]}),s===2&&e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("div",{className:"mx-auto h-32 w-32",children:e.jsx("img",{src:q,alt:"opt",className:"h-full w-full"})}),e.jsx(t.Text,{className:"text-center text-2xl font-semibold text-blue-600",children:"Check your email"}),e.jsxs(t.Text,{className:"text-center text-sm text-gray-500",children:["We have sent a code to",e.jsx("p",{className:"font-semibold",children:l.getFieldValue("email")})]}),e.jsx(t.Text,{className:"text-center text-sm text-gray-500",children:"Please check your email and enter the code below"})]}),e.jsxs(a,{layout:"vertical",form:l,name:"signin",onFinish:T,children:[s===1&&e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:"email",label:"Email",initialValue:"@gmail.com",rules:[{required:!0,message:"Please enter your email"},{type:"email",message:"Email is not valid"}],children:e.jsx(r,{prefix:e.jsx(L,{className:"mr-2 h-4 w-4 text-primary-default"}),size:"large",placeholder:"example@gmail.com"})}),e.jsxs("div",{className:"flex flex-1 items-center gap-x-4",children:[e.jsx(a.Item,{name:"name",label:"Fullname",className:"flex-1",rules:[{required:!0,message:"Please enter your fullname"}],children:e.jsx(r,{placeholder:"John Doe",prefix:e.jsx(g,{className:"mr-2 h-4 w-4 text-primary-default"}),size:"large"})}),e.jsx(a.Item,{name:"gender",className:"flex-1",label:"Gender",children:e.jsx(D,{placeholder:"Male",defaultValue:"male",options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}]})})]}),e.jsxs("div",{className:"flex flex-1 items-center gap-x-4",children:[e.jsx(a.Item,{name:"username",label:"Username",className:"flex-1",rules:[{required:!0,message:"Please enter your username"}],children:e.jsx(r,{prefix:e.jsx(g,{className:"w-full`mr-2 h-4 w-4 text-primary-default"}),size:"large",placeholder:"hducduy21"})}),e.jsx(a.Item,{name:"timeZone",label:"Time Zone:",className:"flex-1",rules:[{required:!0,message:"Please enter timezone in your country"}],children:e.jsx(r,{type:"number",defaultValue:7,prefix:e.jsx(M,{className:"mr-2 h-3 w-3"}),min:0,max:24})})]}),e.jsxs("div",{className:"item-center flex gap-x-4",children:[e.jsx(a.Item,{name:"password",label:"Password",className:"flex-1",rules:[{required:!0,message:"Please enter your password"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,message:"Password must contain at least 8 characters, including letters and numbers"}],children:e.jsx(r.Password,{prefix:e.jsx(y,{className:"mr-2 h-4 w-4 text-primary-default"}),size:"large",placeholder:"*******"})}),e.jsx(a.Item,{name:"confirmPassword",label:"Confirm password",className:"flex-1",rules:[{required:!0,message:"Please enter your password"}],children:e.jsx(r.Password,{prefix:e.jsx(y,{className:"mr-2 h-4 w-4 text-primary-default"}),size:"large",placeholder:"*******"})})]}),e.jsx(d,{onClick:A,icon:e.jsx(R,{className:"absolute right-5 top-3 h-4 w-4"}),type:"primary",size:"large",htmlType:"button",className:"relative float-right mt-2 w-[30%]",children:"Next"})]}),s===2&&e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:"verifyCode",label:"Enter your code:",rules:[{required:!0,message:"Enter your code to verify email"}],children:e.jsx(r.OTP,{disabled:!S,length:6,inputMode:"numeric"})}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(d,{type:"primary",size:"large",loading:b,htmlType:"submit",className:"w-full",children:"Submit"}),e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(t.Text,{className:"text-center text-sm text-gray-500",children:"Didn't receive the code?"}),e.jsx(d,{type:"text",className:"text-sm font-semibold text-blue-600",onClick:()=>{f()},disabled:u,children:u?`${i}s`:"Resend"})]}),e.jsx(d,{onClick:()=>{c(1)},type:"text",icon:e.jsx(B,{className:"h-4 w-4"}),size:"large",className:"flex w-full items-center justify-center gap-x-2",htmlType:"button",children:"Back to sign up"})]})]})]})]})})})};export{W as default};
