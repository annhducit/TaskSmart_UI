import{c as x,ay as u,t as o,d as p,i as j,A as d,b as g,j as e,Q as f,ad as v,h as N,aE as k,bU as A,bV as w,aa as S,y as z,B as m,aF as U,aG as b}from"./index-bcifMYEQ.js";import{F}from"./Table-DqxhufFh.js";import{T as I}from"./text-BZj7_MT7.js";import"./index-DMQ_vExv.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=x("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=x("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),P=async()=>{const{data:s}=await o.get("/users");return s},T=()=>u({queryKey:["users"],queryFn:P}),E=async s=>await o.delete(`/users/${s}`),L=()=>p({mutationFn:E,onSuccess:s=>{j(s.status)?d.success("User removed successfully"):d.error("Failed to remove user")}});function D(){const{modal:s}=g.useApp(),a=L();return async i=>{const r=s.confirm({title:"Remove Account",content:"Are you sure you want to remove this account",cancelText:"Cancel",okText:"Remove",okType:"danger",icon:e.jsx(f,{color:"red",className:"mr-2 mt-0.5 h-5 w-5"})});return r.update({okButtonProps:{loading:a.isPending},cancelButtonProps:{disabled:a.isPending}}),await r.then(c=>(c&&a.mutate(i),c),()=>{})}}const M=async s=>{const{data:a}=await o.get(`/users/search?keyword=${s}`);return a},q=s=>u({queryKey:["tsm/search/user",s],queryFn:()=>M(s),enabled:!!s}),H=()=>{const s=[{title:"No.",width:80,dataIndex:"id",key:"key",render:(t,n,y)=>e.jsx("p",{children:y+1})},{title:e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(I,{size:12}),"Name"]}),dataIndex:"name",key:"name",render:t=>e.jsx("a",{children:t})},{title:e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(A,{size:12}),"Username"]}),dataIndex:"username",key:"username"},{title:e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(C,{size:12}),"Email"]}),key:"email",dataIndex:"email"},{title:e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(w,{size:12}),"Gender"]}),dataIndex:"role",key:"role",render:t=>e.jsx(e.Fragment,{children:t==null?void 0:t.map(n=>e.jsx(S,{color:B[n],children:n},n))})},{title:e.jsxs("div",{className:"flex items-center gap-x-1",children:[e.jsx(R,{size:12}),"Organization"]}),dataIndex:"organization",key:"organization"},{title:"Action",key:"action",render:(t,n)=>e.jsxs(z,{children:[e.jsx(m,{icon:e.jsx(U,{className:"w-3 h-3 text-primary-default"}),size:"small",children:"Edit"}),e.jsx(m,{onClick:()=>r(n.id),icon:e.jsx(b,{color:"red",className:"w-3 h-3"}),size:"small",type:"text",children:"Delete"})]})}],[,,a]=v(N.KEYWORD),{data:l,isLoading:i}=T(),r=D(),{data:c,isLoading:h}=q(a);return e.jsxs("div",{className:"flex flex-col px-6 gap-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Accounts"}),e.jsx("div",{className:"flex items-end gap-x-4",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsx("span",{className:"text-sm opacity-70",children:"Search"}),e.jsx(k.Keyword,{})]})})]}),e.jsx(F,{pagination:{pageSize:50,position:["bottomLeft"]},columns:s,loading:a?h:i,dataSource:a?c:l})]})},B={ADMIN:"yellow",USER:"green"};export{H as default};
